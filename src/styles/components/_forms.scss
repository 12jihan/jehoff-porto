@use "../abstracts/variables" as *;
@use "../abstracts/functions" as *;
@use "../abstracts/mixins" as *;

.form {
  &__group {
    @include flex(column);
    gap: spacing("2");
    margin-bottom: spacing("4");
  }

  &__label {
    font-size: font-size("sm");
    font-weight: 500;
    color: color("dark");
  }

  &__input {
    width: 100%;
    padding: spacing("2") spacing("3");
    border: 1px solid color("light");
    border-radius: 4px;
    background-color: color("white");
    transition: border-color 0.2s ease;

    &:focus {
      outline: none;
      border-color: color("primary");
      box-shadow: 0 0 0 2px rgba(color("primary"), 0.1);
    }

    &--error {
      border-color: color("danger");
    }

    &::placeholder {
      color: rgba(color("dark"), 0.5);
    }

    &:disabled {
      background-color: color("light");
      cursor: not-allowed;
    }
  }

  &__textarea {
    @extend .form__input;
    min-height: 120px;
    resize: vertical;
  }

  &__select {
    @extend .form__input;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23666' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right spacing("3") center;
    padding-right: spacing("8");
  }

  &__checkbox,
  &__radio {
    &-group {
      @include flex(row, flex-start, center);
      gap: spacing("2");
    }

    &-input {
      width: spacing("4");
      height: spacing("4");
      margin: 0;
      cursor: pointer;

      &:checked {
        accent-color: color("primary");
      }
    }

    &-label {
      font-size: font-size("sm");
      cursor: pointer;
    }
  }

  &__error {
    font-size: font-size("xs");
    color: color("danger");
    margin-top: spacing("1");
  }

  &__hint {
    font-size: font-size("xs");
    color: rgba(color("dark"), 0.6);
    margin-top: spacing("1");
  }

  &__submit {
    @include flex(row, center, center);
    width: 100%;
    padding: spacing("3") spacing("4");
    background-color: color("primary");
    color: color("white");
    border: none;
    border-radius: 4px;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.2s ease;

    &:hover {
      background-color: darken(color("primary"), 5%);
    }

    &:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }
  }

  // Form layout variations
  &--inline {
    @include mq("md") {
      .form__group {
        flex-direction: row;
        align-items: center;
        gap: spacing("4");
      }

      .form__label {
        flex: 0 0 120px;
        text-align: right;
      }
    }
  }

  &--compact {
    .form__group {
      margin-bottom: spacing("2");
    }

    .form__input,
    .form__select {
      padding: spacing("1") spacing("2");
    }
  }

  // Search form variation
  &--search {
    position: relative;

    .form__input {
      padding-left: spacing("8");
    }

    &::before {
      content: "";
      position: absolute;
      left: spacing("3");
      top: 50%;
      transform: translateY(-50%);
      width: spacing("4");
      height: spacing("4");
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23666' viewBox='0 0 16 16'%3E%3Cpath d='M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: center;
      opacity: 0.5;
    }
  }

  // Grid layout for form groups
  &--grid {
    @include mq("md") {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: spacing("4");

      .form__group {
        margin-bottom: 0;
      }

      .form__group--full {
        grid-column: 1 / -1;
      }
    }
  }
}

// Input sizes
.form__input--sm {
  padding: spacing("1") spacing("2");
  font-size: font-size("sm");
}

.form__input--lg {
  padding: spacing("3") spacing("4");
  font-size: font-size("lg");
}

// Custom file input
.form__file {
  &-input {
    display: none;
  }

  &-label {
    @include flex(row, center, center);
    gap: spacing("2");
    padding: spacing("2") spacing("4");
    background-color: color("light");
    border: 1px dashed color("dark");
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;

    &:hover {
      background-color: darken(color("light"), 5%);
    }
  }

  &-icon {
    width: spacing("4");
    height: spacing("4");
    opacity: 0.5;
  }
}
