@use "../abstracts/variables" as *;
@use "../abstracts/functions" as *;
@use "../abstracts/mixins" as *;

.card {
  background-color: color("white");
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(color("dark"), 0.1);
  transition:
    transform 0.2s ease,
    box-shadow 0.2s ease;
  overflow: hidden;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(color("dark"), 0.15);
  }

  // Card image
  &__image {
    width: 100%;
    height: 200px;
    object-fit: cover;

    &--tall {
      height: 300px;
    }

    &--square {
      aspect-ratio: 1;
    }
  }

  // Card content
  &__content {
    padding: spacing("4");
  }

  &__title {
    font-size: font-size("xl");
    font-weight: 600;
    margin-bottom: spacing("2");
    color: color("dark");
  }

  &__subtitle {
    font-size: font-size("sm");
    color: rgba(color("dark"), 0.6);
    margin-bottom: spacing("3");
  }

  &__text {
    font-size: font-size("base");
    color: color("dark");
    margin-bottom: spacing("4");
    line-height: 1.6;
  }

  // Card footer
  &__footer {
    padding: spacing("3") spacing("4");
    border-top: 1px solid color("light");
    @include flex(row, space-between, center);
  }

  // Card actions
  &__actions {
    @include flex(row, flex-start, center);
    gap: spacing("2");
  }

  &__button {
    padding: spacing("2") spacing("4");
    border-radius: 4px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;

    &--primary {
      background-color: color("primary");
      color: color("white");
      border: none;

      &:hover {
        background-color: darken(color("primary"), 5%);
      }
    }

    &--outline {
      background-color: transparent;
      border: 1px solid color("primary");
      color: color("primary");

      &:hover {
        background-color: color("primary");
        color: color("white");
      }
    }
  }

  // Card variations
  &--horizontal {
    @include mq("md") {
      @include flex(row);

      .card__image {
        width: 40%;
        height: auto;
      }

      .card__content {
        flex: 1;
      }
    }
  }

  &--compact {
    .card__content {
      padding: spacing("3");
    }

    .card__title {
      font-size: font-size("lg");
    }
  }

  // Feature card
  &--feature {
    border: 2px solid color("primary");

    &::before {
      content: "Featured";
      position: absolute;
      top: spacing("2");
      right: spacing("2");
      padding: spacing("1") spacing("2");
      background-color: color("primary");
      color: color("white");
      border-radius: 4px;
      font-size: font-size("xs");
      font-weight: 500;
    }
  }

  // Card with overlay
  &--overlay {
    position: relative;

    .card__content {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(
        to top,
        rgba(color("dark"), 0.8),
        rgba(color("dark"), 0)
      );
      color: color("white");
    }

    .card__title,
    .card__subtitle,
    .card__text {
      color: color("white");
    }
  }

  // Card grid layout
  &-grid {
    display: grid;
    gap: spacing("4");

    @include mq("sm") {
      grid-template-columns: repeat(2, 1fr);
    }

    @include mq("md") {
      grid-template-columns: repeat(3, 1fr);
    }

    @include mq("lg") {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  // Card with badges
  &__badge {
    display: inline-block;
    padding: spacing("1") spacing("2");
    background-color: color("light");
    color: color("dark");
    border-radius: 16px;
    font-size: font-size("xs");
    font-weight: 500;
    margin-right: spacing("2");
    margin-bottom: spacing("2");

    &--primary {
      background-color: color("primary");
      color: color("white");
    }

    &--success {
      background-color: color("success");
      color: color("white");
    }
  }

  // Loading state
  &--loading {
    pointer-events: none;

    .card__image,
    .card__title,
    .card__text {
      background: linear-gradient(
        90deg,
        color("light") 25%,
        darken(color("light"), 5%) 50%,
        color("light") 75%
      );
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
    }

    .card__title {
      height: 24px;
      width: 80%;
      margin-bottom: spacing("2");
    }

    .card__text {
      height: 16px;
      margin-bottom: spacing("2");

      &:last-child {
        width: 60%;
      }
    }
  }
}

@keyframes loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}
